(function () {
  'use strict';

  function getMax(data, field) {
    let max = 0;
    data.forEach((d) => {
      if (d[field] > max) max = d[field];
    });
    return max;
  }

  function format(val) {
    if (val / 1000000000 > 1) {
      // Billions
      return `\$${Math.round(val / 100000000) / 10}B`;
    } else if (val / 1000000 > 1) {
      // Millions
      return `\$${Math.round(val / 100000) / 10}M`;
    }
    // Thousands
    return `\$${Math.round(val / 100) / 10}K`;
  }

  /**
   *
   * @param {[]} data Requires data = [{ label: "BlackRock", value: 1533193730.0 }, ...]
   */

  function sidebar(data, maxValue) {
    let chart = document.createElement("ol");
    chart.classList.add("sidebar");
    let max;
    if (!maxValue) {
      max = getMax(data, "value");
    } else {
      max = maxValue;
    }
    data.forEach((d) => {
      const row = document.createElement("li");
      row.classList.add("sidebar__row");
      if (d.highlight) row.classList.add("sidebar__row--highlight");
      const width = Math.round((d.value / max) * 100);
      let labelClass = width <= 50 ? "sidebar__bar--label-outside" : "";
      row.innerHTML = `<p class="sidebar__label"><a class="profile-link" href="#">${d.label}</a></p>
    <div class="sidebar__bar ${labelClass}">
      <div style="width:${width}%;" class="sidebar__bar-inner">
        <span>${format(d.value)}</span>
      </div>
    </div>`;
      chart.appendChild(row);
    });

    return chart;
  }

  document.addEventListener("DOMContentLoaded", function (e) {
    const data = [
      { label: "BlackRock", value: 1533193730.0 },
      { label: "Vanguard", value: 1226957752.0 },
      { label: "T Rowe Price", value: 997936456.0 },
      { label: "Prudential", value: 489894079.0 },
      { label: "State Street", value: 472404363.0 },
      { label: "Franklin Resources", value: 449563103.0 },
      { label: "JPMorgan Chase", value: 419029039.0 },
      { label: "Credit Agricole", value: 373128863.0 },
      { label: "Invesco", value: 284098567.0 },
      { label: "AllianceBernstein", value: 272906004 },
    ];
    const container = document.querySelector("#deforest-container");
    const max = getMax(data, "value");
    data.sort((a, b) => b.value - a.value);

    container.appendChild(sidebar(data));
  });

}());
//# sourceMappingURL=top-deforesters.min.js.map
